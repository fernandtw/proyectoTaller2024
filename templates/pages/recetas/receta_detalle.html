{% extends 'components/Layout/base.html' %} 

{% block title %}Detalle Receta{% endblock %}
{% block content %}

  <div class="container my-5 align-items-center justify-content-center">
    <div class="row">
      <div class="col-lg-8 mx-auto">
        <article>
          <h1 class="mb-4">{{ receta.title }}</h1>
          {% if receta.image %}
            <img src="{{ receta.image.url }}" alt="{{ receta.title }}" class="img-fluid rounded mb-4">
          {% endif %}

          <h2>Ingredientes</h2>
          <ol class="mb-4">
            {% for ingrediente in ingredientes %}
              <li>{{ ingrediente.strip }}</li>
            {% endfor %}
          </ol>

          <h2>Instrucciones</h2>
          <ol class="mb-4">
            {% for instruccion in instrucciones %}
              <li>{{ instruccion.strip }}</li>
            {% endfor %}
          </ol>

          {% if receta.tabla %}
            <h2>Tabla Nutricional</h2>
            <img src="{{ receta.tabla.url }}" style="width: 20rem;" alt="{{ receta.title }}" class="img-fluid rounded mb-4">
          {% endif %}
          <br><br>
          {% if user.is_authenticated %}
          <form action="{% url 'recetas:like_post' receta.id %}" method="post" style="display: inline;">  <!-- Asegúrate de usar el ID correcto -->
            {% csrf_token %}
            <button type="submit" class="btn {% if user in receta.likes.all %}btn-success{% else %}btn-danger{% endif %}">
                <i class="bi bi-heart"></i>  <!-- Icono de corazón -->
                <span class="badge">{{ receta.likes.count }}</span>  <!-- Contador de "Me gusta" -->
            </button>
          </form>
          {% else %}
            <p>Debes estar logueado para dar "Me gusta".</p>
          {% endif %}


        </article>

      </div>
    </div>
  </div>

{% endblock %}
